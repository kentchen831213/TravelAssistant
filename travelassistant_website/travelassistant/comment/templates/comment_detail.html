{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="container">
  <h2>This is your comment!</h2>

    <h3>UserID:
      {% if superstar %}
        <img src="https://services.google.com/fh/files/helpcenter/points-badge_level_four.png" width="30" height="30"> {{user_id}}
      {% else %}
        {{user_id}}
      {% endif  %}
    </h3>


  <h2>Your Comments for Restaurants</h2>
  <table>
    <tr>
        <th>Name</th>
        <th>Comment Date</th>
        <th>Comment content</th>
        <th>Action</th>
    </tr>
    {% for c in restaurant_comment_result %}

      <tr>
        <form class="" action="{% url 'comment:comment-delete' c.comment_id %}" method="POST">
            {% csrf_token %}
            <td>{{c.r_name}}</td>
            <td>{{c.date}}</td>
            <td>{{c.comment}}</td>
            <!-- <td><button>Delete</button></td> -->
            <td><input name="submit" type="submit" value="Delete Restaurants Comment"></td>
            <td> </td>
        </form>
        <form class="" action="{% url 'comment:comment-edit' c.comment_id %}" method="POST">
          {% csrf_token %}
          <td><input name="submit" type="submit" value="Edit Restaurants Comment"></td>
        </form>
      </tr>
    {% endfor %}
  </table>

  <h2>Your Comments for Accommodations</h2>
  <table>
    <tr>
      <th>Name</th>
      <th>Comment Date</th>
      <th>Comment content</th>
      <th>Action</th>
  </tr>
    {% for c in accommodations_comment_result %}
      <tr>
        <form class="" action="{% url 'comment:comment-delete' c.comment_id %}" method="POST">
            {% csrf_token %}
            <td>{{c.ac_name}}</td>
            <td>{{c.date}}</td>
            <td>{{c.comment}}</td>
            <!-- <td><button>Delete</button></td> -->
            <td><input name="submit" type="submit" value="Delete Accommodations Comment"></td>
            <td> </td>
        </form>
        <form class="" action="{% url 'comment:comment-edit' c.comment_id %}" method="POST">
          {% csrf_token %}
          <td><input name="submit" type="submit" value="Edit Accommodations Comment"></td>
        </form>
      </tr>
    {% endfor %}
  </table>

  <h2>Your Comments for Attractions</h2>
  <table>
    <tr>
      <th>Name</th>
      <th>Comment Date</th>
      <th>Comment content</th>
      <th>Action</th>
  </tr>
    {% for c in attractions_comment_result %}
      <tr>
        <form class="" action="{% url 'comment:comment-delete' c.comment_id %}" method="POST">
            {% csrf_token %}
            <td>{{c.a_name}}</td>
            <td>{{c.date}}</td>
            <td>{{c.comment}}</td>
            <!-- <td><button>Delete</button></td> -->
            <td><input name="submit" type="submit" value="Delete Attractions Comment"></td>
            <td> </td>
        </form>
        <form class="" action="{% url 'comment:comment-edit' c.comment_id %}" method="POST">
          {% csrf_token %}
          <td><input name="submit" type="submit" value="Edit Attractions Comment"></td>
        </form>
      </tr>
    {% endfor %}
  </table>
</div>

<!-- Search specific spot comment-->
<!-- Search by Keywords -->
<h1>Search other people comments here!</h1>
<div class="form">
  <form method="POST">

    {% csrf_token %}
    <!-- {{ trip_search_box_form.as_p }} -->
    <div class="form-group">
      <!-- {{ trip_search_box_form.city.label_tag }} -->
      <!-- {{ trip_search_box_form.spot.label_tag }} -->
      {{ comment_search_box_form.city}}
      {{ comment_search_box_form.spot}}
    </div>
    <div class="form-group">
      <!-- {{ trip_search_box_form.keyword.label_tag }} -->
      {{ comment_search_box_form.keyword}}
    </div>
    <input name="submit" type="submit" value="Search">
  </form>
</div>



<!-- Add Results Here -->
<!-- No results showed on the start page -->
<div>
  {% if form_result.is_valid and form_result.cleaned_data %}

  <div>
    <h3>Search for {{form_result.cleaned_data.city}}'s {{form_result.cleaned_data.spot}}</h3>
    </br>
    <!-- {{result_list}} -->
    <ul style="list-style-type:none;">
        {% for s in result_list %}
        {% if s.type == 'Restaurants' %}
        <li>{{s.name}}{{s.comment}}{{s.rating}}</li>
        {% elif s.type == 'Attractions' %}
        <li>{{s.name}}{{s.comment}}{{s.rating}}</li>
        {% elif s.type == 'Accommodations' %}
        <li>{{s.name}}{{s.comment}}{{s.rating}}</li>
        {% endif %}
        {% endfor %}
    </ul>
  </div>

  {% else %}
  <h3> Hey! You forgot to search! </h3>
  {% endif %}
</div>
{% endblock %}
